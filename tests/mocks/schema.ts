import { DocumentLoader, Options } from '@iden3/js-jsonld-merklization';
import { RemoteDocument, Url } from 'jsonld/jsonld-spec';
import { cacheLoader } from '../../src';

const testSchemas = [
  // ipfs Ld schemas
  {
    url: 'ipfs://Qma5B4jNwiHtRd5RXGoRncV79EZvB7LsfpHgv8Vi4xitV1',
    doc: '{"@context":[{"@protected":true,"@version":1.1,"id":"@id","type":"@type","Balance":{"@context":{"@propagate":true,"@protected":true,"polygon-vocab":"urn:uuid:a33d80ea-88c9-4c70-a321-fc7bc9ef9cc4#","iden3_serialization":"iden3:v1:slotIndexA=address&slotIndexB=balance","xsd":"http://www.w3.org/2001/XMLSchema#","address":{"@id":"polygon-vocab:address","@type":"xsd:positiveInteger"},"balance":{"@id":"polygon-vocab:balance","@type":"xsd:positiveInteger"}},"@id":"urn:uuid:4dac09b1-2c08-47bc-abc7-c6ecef9be36b"}}]}'
  },

  {
    url: 'ipfs://Qmb48rJ5SiQMLXjVkaLQB6fWbT7C8LK75MHsCoHv8GAc15',
    doc: '{"@context":[{"@protected":true,"@version":1.1,"id":"@id","type":"@type","operators":{"@context":{"@propagate":true,"@protected":true,"polygon-vocab":"urn:uuid:353680e7-475f-418d-bf14-dcd37dd024d3#","xsd":"http://www.w3.org/2001/XMLSchema#","string1":{"@id":"polygon-vocab:string1","@type":"xsd:string"},"number1":{"@id":"polygon-vocab:number1","@type":"xsd:double"},"boolean1":{"@id":"polygon-vocab:boolean1","@type":"xsd:boolean"},"integer1":{"@id":"polygon-vocab:integer1","@type":"xsd:integer"},"positive-integer1":{"@id":"polygon-vocab:positive-integer1","@type":"xsd:positiveInteger"},"non-negative-integer1":{"@id":"polygon-vocab:non-negative-integer1","@type":"xsd:nonNegativeInteger"},"date-time1":{"@id":"polygon-vocab:date-time1","@type":"xsd:dateTime"}},"@id":"urn:uuid:5791b292-9498-4415-ad0a-8c2b5c9240c3"}}]}'
  },

  {
    url: 'ipfs://Qmb48rJ5SiQMLXjVkaLQB6fWbT7C8LK75MHsCoHv8GAc15',
    doc: '{"@context":[{"@protected":true,"@version":1.1,"id":"@id","type":"@type","operators":{"@context":{"@propagate":true,"@protected":true,"polygon-vocab":"urn:uuid:353680e7-475f-418d-bf14-dcd37dd024d3#","xsd":"http://www.w3.org/2001/XMLSchema#","string1":{"@id":"polygon-vocab:string1","@type":"xsd:string"},"number1":{"@id":"polygon-vocab:number1","@type":"xsd:double"},"boolean1":{"@id":"polygon-vocab:boolean1","@type":"xsd:boolean"},"integer1":{"@id":"polygon-vocab:integer1","@type":"xsd:integer"},"positive-integer1":{"@id":"polygon-vocab:positive-integer1","@type":"xsd:positiveInteger"},"non-negative-integer1":{"@id":"polygon-vocab:non-negative-integer1","@type":"xsd:nonNegativeInteger"},"date-time1":{"@id":"polygon-vocab:date-time1","@type":"xsd:dateTime"}},"@id":"urn:uuid:5791b292-9498-4415-ad0a-8c2b5c9240c3"}}]}'
  },

  {
    url: 'Qmdhuf9fhqzweDa1TgoajDEj7Te7p28eeeZVfiioAjUC15',
    doc: '{"@context":[{"@protected":true,"@version":1.1,"id":"@id","type":"@type","IndividualKYC":{"@context":{"@propagate":true,"@protected":true,"polygon-vocab":"urn:uuid:92ecc6f5-3dd7-4284-a48b-31aaa9a7620c#","xsd":"http://www.w3.org/2001/XMLSchema#","full-name":{"@id":"polygon-vocab:full-name","@type":"xsd:string"},"country":{"@id":"polygon-vocab:country","@type":"xsd:string"},"state":{"@id":"polygon-vocab:state","@type":"xsd:string"},"city":{"@id":"polygon-vocab:city","@type":"xsd:string"},"street":{"@id":"polygon-vocab:street","@type":"xsd:string"},"zip-code":{"@id":"polygon-vocab:zip-code","@type":"xsd:string"},"phone":{"@id":"polygon-vocab:phone","@type":"xsd:string"},"email":{"@id":"polygon-vocab:email","@type":"xsd:string"},"email-verified":{"@id":"polygon-vocab:email-verified","@type":"xsd:boolean"}},"@id":"urn:uuid:aae65090-6a9c-498c-8c8f-df44d495facc"}}]}'
  },

  {
    url: 'ipfs://QmZ1zsLspwnjifxsncqDkB7EHb2pnaRnBPc5kqQcVxW5rV',
    doc: '{"@context":[{"@protected":true,"@version":1.1,"id":"@id","type":"@type","TestString":{"@context":{"@propagate":true,"@protected":true,"polygon-vocab":"urn:uuid:f71e73d5-72ee-44a8-9d1a-91a1626173b2#","xsd":"http://www.w3.org/2001/XMLSchema#","stringTest":{"@id":"polygon-vocab:stringTest","@type":"xsd:string"}},"@id":"urn:uuid:31e55a6c-effb-42b4-b59a-e041d639faac"}}]}'
  },

  {
    url: 'ipfs://QmQXQ5gBNfJuc9QXy5pGbaVfLxzFjCDAvPs4Fa43BaU1U4',
    doc: '{"@context":[{"@protected":true,"@version":1.1,"id":"@id","type":"@type","DeliveryAddress":{"@context":{"@propagate":true,"@protected":true,"polygon-vocab":"urn:uuid:8d44cad8-527d-4693-9e22-91fd3cfba1dd#","xsd":"http://www.w3.org/2001/XMLSchema#","price":{"@id":"polygon-vocab:price","@type":"xsd:double"},"deliveryTime":{"@id":"polygon-vocab:deliveryTime","@type":"xsd:dateTime"},"postalProviderInformation":{"@context":{"name":{"@id":"polygon-vocab:name","@type":"xsd:string"},"officeNo":{"@id":"polygon-vocab:officeNo","@type":"xsd:integer"}},"@id":"polygon-vocab:postalProviderInformation"},"homeAddress":{"@context":{"line2":{"@id":"polygon-vocab:line2","@type":"xsd:string"},"line1":{"@id":"polygon-vocab:line1","@type":"xsd:string"}},"@id":"polygon-vocab:homeAddress"},"isPostalProvider":{"@id":"polygon-vocab:isPostalProvider","@type":"xsd:boolean"}},"@id":"urn:uuid:132b2fa6-f288-4e2d-905a-21c145f71414"}}]}'
  },

  {
    url: 'ipfs://QmZreEq1z5tMAuNBNTXjfpYMQbQ8KL7YkkVBt5nG1bUqJT',
    doc: '{"@context":[{"@protected":true,"@version":1.1,"id":"@id","type":"@type","DeliverAddressMultiTest":{"@context":{"@propagate":true,"@protected":true,"polygon-vocab":"urn:uuid:264d4ebb-e5be-410a-b2a6-ce2360951dfd#","xsd":"http://www.w3.org/2001/XMLSchema#","operatorId":{"@id":"polygon-vocab:operatorId","@type":"xsd:integer"},"country":{"@id":"polygon-vocab:country","@type":"xsd:string"},"price":{"@id":"polygon-vocab:price","@type":"xsd:double"},"deliveryTime":{"@id":"polygon-vocab:deliveryTime","@type":"xsd:dateTime"},"isPostalProvider":{"@id":"polygon-vocab:isPostalProvider","@type":"xsd:boolean"},"postalProviderInformation":{"@context":{"insured":{"@id":"polygon-vocab:insured","@type":"xsd:boolean"},"weight":{"@id":"polygon-vocab:weight","@type":"xsd:double"},"name":{"@id":"polygon-vocab:name","@type":"xsd:string"},"officeNo":{"@id":"polygon-vocab:officeNo","@type":"xsd:integer"}},"@id":"polygon-vocab:postalProviderInformation"},"homeAddress":{"@context":{"expectedFrom":{"@id":"polygon-vocab:expectedFrom","@type":"xsd:dateTime"},"line2":{"@id":"polygon-vocab:line2","@type":"xsd:string"},"line1":{"@id":"polygon-vocab:line1","@type":"xsd:string"}},"@id":"polygon-vocab:homeAddress"}},"@id":"urn:uuid:7c577d49-683e-4d24-8755-f5520df9c993"}}]}'
  },

  {
    url: 'ipfs://QmcvoKLc742CyVH2Cnw6X95b4c8VdABqNPvTyAHEeaK1aP',
    doc: '{"@context":[{"@protected":true,"@version":1.1,"id":"@id","type":"@type","types123":{"@context":{"@propagate":true,"@protected":true,"polygon-vocab":"urn:uuid:f2606686-53bf-499e-86f1-fe5abbc11763#","xsd":"http://www.w3.org/2001/XMLSchema#","string":{"@id":"polygon-vocab:string","@type":"xsd:string"},"int":{"@id":"polygon-vocab:int","@type":"xsd:integer"},"double":{"@id":"polygon-vocab:double","@type":"xsd:double"},"bol":{"@id":"polygon-vocab:bol","@type":"xsd:boolean"},"dt":{"@id":"polygon-vocab:dt","@type":"xsd:dateTime"}},"@id":"urn:uuid:c22db6e7-6234-4dcc-8488-02a21ccb88ed"}}]}'
  },
  // https
  {
    url: 'https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v4.jsonld',
    doc: '{"@context":[{"@version":1.1,"@protected":true,"id":"@id","type":"@type","KYCAgeCredential":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v4.jsonld#KYCAgeCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","xsd":"http://www.w3.org/2001/XMLSchema#","birthday":{"@id":"kyc-vocab:birthday","@type":"xsd:integer"},"documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"}}},"KYCCountryOfResidenceCredential":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v4.jsonld#KYCCountryOfResidenceCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","xsd":"http://www.w3.org/2001/XMLSchema#","countryCode":{"@id":"kyc-vocab:countryCode","@type":"xsd:integer"},"documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"}}}}]}'
  },
  {
    url: 'https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v101.json-ld',
    doc: '{"@context":[{"@version":1.1,"@protected":true,"id":"@id","type":"@type","KYCAgeCredential":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v101.json-ld#KYCAgeCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","xsd":"http://www.w3.org/2001/XMLSchema#","birthday":{"@id":"kyc-vocab:birthday","@type":"xsd:integer"},"documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"}}},"KYCCountryOfResidenceCredential":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v101.json-ld#KYCCountryOfResidenceCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","xsd":"http://www.w3.org/2001/XMLSchema#","countryCode":{"@id":"kyc-vocab:countryCode","@type":"xsd:integer"},"documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"}}},"KYCEmployee":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v101.json-ld#KYCEmployee","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","xsd":"http://www.w3.org/2001/XMLSchema#","documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"},"ZKPexperiance":{"@id":"kyc-vocab:hasZKPexperiance","@type":"xsd:boolean"},"hireDate":{"@id":"kyc-vocab:hireDate","@type":"xsd:dateTime"},"position":{"@id":"kyc-vocab:position","@type":"xsd:string"},"salary":{"@id":"kyc-vocab:salary","@type":"xsd:double"}}}}]}'
  },
  {
    url: 'https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-nonmerklized.jsonld',
    doc: '{"@context":[{"@version":1.1,"@protected":true,"id":"@id","type":"@type","KYCAgeCredential":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-nonmerklized.jsonld#KYCAgeCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","iden3_serialization":"iden3:v1:slotIndexA=birthday&slotIndexB=documentType","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","xsd":"http://www.w3.org/2001/XMLSchema#","birthday":{"@id":"kyc-vocab:birthday","@type":"xsd:integer"},"documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"}}},"KYCCountryOfResidenceCredential":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-nonmerklized.jsonld#KYCCountryOfResidenceCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","iden3_serialization":"iden3:v1:slotIndexA=birthday&slotIndexB=documentType","xsd":"http://www.w3.org/2001/XMLSchema#","countryCode":{"@id":"kyc-vocab:countryCode","@type":"xsd:integer"},"documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"}}}}]}'
  },
  {
    url: 'https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v3.json-ld',
    doc: '{"@context":[{"@version":1.1,"@protected":true,"id":"@id","type":"@type","KYCAgeCredential":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v3.json-ld#KYCAgeCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","xsd":"http://www.w3.org/2001/XMLSchema#","birthday":{"@id":"kyc-vocab:birthday","@type":"xsd:integer"},"documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"}}},"KYCCountryOfResidenceCredential":{"@id":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v3.json-ld#KYCCountryOfResidenceCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","kyc-vocab":"https://github.com/iden3/claim-schema-vocab/blob/main/credentials/kyc.md#","xsd":"http://www.w3.org/2001/XMLSchema#","countryCode":{"@id":"kyc-vocab:countryCode","@type":"xsd:integer"},"documentType":{"@id":"kyc-vocab:documentType","@type":"xsd:integer"}}}}]}'
  },

  // ipfs and https json schemas also fit to interface, even though they are not ld objects

  {
    url: 'ipfs://QmWDmZQrtvidcNK7d6rJwq7ZSi8SUygJaKepN7NhKtGryc',
    // eslint-disable-next-line @cspell/spellchecker
    doc: '{"$metadata":{"type":"operators","uris":{"jsonLdContext":"ipfs://Qmb48rJ5SiQMLXjVkaLQB6fWbT7C8LK75MHsCoHv8GAc15"},"version":"1.1"},"$schema":"https://json-schema.org/draft/2020-12/schema","description":"desd","title":" test operators","properties":{"@context":{"type":["string","array","object"]},"expirationDate":{"format":"date-time","type":"string"},"id":{"type":"string"},"issuanceDate":{"format":"date-time","type":"string"},"issuer":{"type":["string","object"],"format":"uri","properties":{"id":{"format":"uri","type":"string"}},"required":["id"]},"type":{"type":["string","array"],"items":{"type":"string"}},"credentialSubject":{"description":"Stores the data of the credential","title":"Credential subject","properties":{"id":{"description":"Stores the DID of the subject that owns the credential","title":"Credential subject ID","format":"uri","type":"string"},"string1":{"description":"desc","title":"stringAtt","type":"string"},"number1":{"description":"desc","title":"numberAtt","type":"number"},"boolean1":{"description":"desc","title":"booleanAtt","type":"boolean"},"integer1":{"description":"desc","title":"integerAtt","type":"integer"},"positive-integer1":{"description":"desc","title":"positive-integerAtt","format":"positive-integer","type":"string"},"non-negative-integer1":{"description":"desc","title":"non-negative-integerAtt","format":"non-negative-integer","type":"string"},"date-time1":{"description":"desc","title":"date-timeAtt","format":"date-time","type":"string"}},"required":[],"type":"object"},"credentialSchema":{"properties":{"id":{"format":"uri","type":"string"},"type":{"type":"string"}},"required":["id","type"],"type":"object"},"credentialStatus":{"description":"Allows the discovery of information about the current status of the credential, such as whether it is suspended or revoked.","title":"Credential Status","properties":{"id":{"description":"Id URL of the credentialStatus.","title":"Id","format":"uri","type":"string"},"type":{"description":"Expresses the credential status type (method). The value should provide enough information to determine the current status of the credential.","title":"Type","type":"string"}},"required":["id","type"],"type":"object"}},"required":["@context","id","issuanceDate","issuer","type","credentialSubject","credentialSchema"],"type":"object"}'
  },

  {
    url: 'ipfs://QmYgooZFeXYi1QQm6iUpiEteMJ822pUSuxonXUpqNgFVnQ',
    doc: '{"$metadata":{"type":"IndividualKYC","uris":{"jsonLdContext":"ipfs://Qmdhuf9fhqzweDa1TgoajDEj7Te7p28eeeZVfiioAjUC15"},"version":"1.2"},"$schema":"https://json-schema.org/draft/2020-12/schema","description":"It is used to create credential for KYC of Individuals","title":"Individual KYC","properties":{"@context":{"type":["string","array","object"]},"expirationDate":{"format":"date-time","type":"string"},"id":{"type":"string"},"issuanceDate":{"format":"date-time","type":"string"},"issuer":{"type":["string","object"],"format":"uri","properties":{"id":{"format":"uri","type":"string"}},"required":["id"]},"type":{"type":["string","array"],"items":{"type":"string"}},"credentialSubject":{"description":"Stores the data of the credential","title":"Credential subject","properties":{"id":{"description":"Stores the DID of the subject that owns the credential","title":"Credential subject ID","format":"uri","type":"string"},"full-name":{"description":"Name","title":"Full Name","type":"string"},"country":{"description":"In which country your business located ","title":"Country","type":"string"},"state":{"description":"state","title":"State","type":"string"},"city":{"description":"city","title":"City","type":"string"},"street":{"description":"street","title":"Street","type":"string"},"zip-code":{"description":"zip code","title":"Zip code","type":"string"},"phone":{"description":"phone","title":"Phone","type":"string"},"email":{"description":"email","title":"Email","format":"email","type":"string"},"email-verified":{"default":false,"description":"is your email verified","title":"Email verified","type":"boolean"}},"required":[],"type":"object"},"credentialSchema":{"properties":{"id":{"format":"uri","type":"string"},"type":{"type":"string"}},"required":["id","type"],"type":"object"},"credentialStatus":{"description":"Allows the discovery of information about the current status of the credential, such as whether it is suspended or revoked.","title":"Credential Status","properties":{"id":{"description":"Id URL of the credentialStatus.","title":"Id","format":"uri","type":"string"},"type":{"description":"Expresses the credential status type (method). The value should provide enough information to determine the current status of the credential.","title":"Type","type":"string"}},"required":["id","type"],"type":"object"}},"required":["@context","id","issuanceDate","issuer","type","credentialSubject","credentialSchema"],"type":"object"}'
  },

  {
    url: 'ipfs://Qmb1Q5jLETkUkhswCVX52ntTCNQnRm3NyyGf1NZG98u5cv',
    doc: '{"$metadata":{"uris":{"jsonLdContext":"ipfs://QmZ1zsLspwnjifxsncqDkB7EHb2pnaRnBPc5kqQcVxW5rV"},"type":"TestString","version":"1"},"$schema":"https://json-schema.org/draft/2020-12/schema","description":"TestString","title":"TestString","properties":{"credentialSubject":{"description":"Stores the data of the credential","title":"Credential subject","properties":{"stringTest":{"description":"stringTest","title":"stringTest","type":"string"},"id":{"description":"Stores the DID of the subject that owns the credential","title":"Credential subject ID","format":"uri","type":"string"}},"required":[],"type":"object"},"@context":{"type":["string","array","object"]},"expirationDate":{"format":"date-time","type":"string"},"id":{"type":"string"},"issuanceDate":{"format":"date-time","type":"string"},"issuer":{"type":["string","object"],"format":"uri","properties":{"id":{"format":"uri","type":"string"}},"required":["id"]},"type":{"type":["string","array"],"items":{"type":"string"}},"credentialSchema":{"properties":{"id":{"format":"uri","type":"string"},"type":{"type":"string"}},"required":["id","type"],"type":"object"}},"required":["credentialSubject","@context","id","issuanceDate","issuer","type","credentialSchema"],"type":"object"}'
  },

  {
    url: 'ipfs://QmbLQKw9Mzc9fVHowatJbvZjWNSUZchxYQX5Wtt8Ff9rGx',
    doc: '{"$metadata":{"uris":{"jsonLdContext":"ipfs://QmQXQ5gBNfJuc9QXy5pGbaVfLxzFjCDAvPs4Fa43BaU1U4"},"type":"DeliveryAddress","version":"1"},"$schema":"https://json-schema.org/draft/2020-12/schema","description":"contains delivery address","title":"DeliverAddress","properties":{"credentialSubject":{"description":"Stores the data of the credential","title":"Credential subject","properties":{"price":{"description":"price to pay for the delivery","title":"Price","type":"number"},"deliveryTime":{"description":"time of the delivery","title":"Delivery time","format":"date-time","type":"string"},"postalProviderInformation":{"description":"information if postal provider office is chosen","title":"postal office","properties":{"name":{"description":"Name of the service provider","title":"Name","type":"string"},"officeNo":{"description":"number of the office","title":"Office Number","type":"integer"}},"required":["name","officeNo"],"type":"object"},"homeAddress":{"description":"physical address ","title":"home address","properties":{"line2":{"description":"line 2","title":"line 2","type":"string"},"line1":{"description":"line 1","title":"Line 1","type":"string"}},"required":["line2","line1"],"type":"object"},"isPostalProvider":{"description":"should be true if delivery is expected to the postal provider office","title":"if postal provider is used","type":"boolean"},"id":{"description":"Stores the DID of the subject that owns the credential","title":"Credential subject ID","format":"uri","type":"string"}},"required":["price","deliveryTime","isPostalProvider"],"type":"object"},"@context":{"type":["string","array","object"]},"expirationDate":{"format":"date-time","type":"string"},"id":{"type":"string"},"issuanceDate":{"format":"date-time","type":"string"},"issuer":{"type":["string","object"],"format":"uri","properties":{"id":{"format":"uri","type":"string"}},"required":["id"]},"type":{"type":["string","array"],"items":{"type":"string"}},"credentialSchema":{"properties":{"id":{"format":"uri","type":"string"},"type":{"type":"string"}},"required":["id","type"],"type":"object"}},"required":["credentialSubject","@context","id","issuanceDate","issuer","type","credentialSchema"],"type":"object"}'
  },

  {
    url: 'ipfs://QmQKgn6QUHzHXBqPCUbpCnHSyVRLaCVoDqA8fg27DzS79D',
    doc: '{"$metadata":{"type":"DeliverAddressMultiTest","uris":{"jsonLdContext":"ipfs://QmZreEq1z5tMAuNBNTXjfpYMQbQ8KL7YkkVBt5nG1bUqJT"},"version":"1"},"$schema":"https://json-schema.org/draft/2020-12/schema","description":"contains delivery address with all possible test fields combination (types / nested)","title":"DeliverAddressMultiTest","properties":{"@context":{"type":["string","array","object"]},"expirationDate":{"format":"date-time","type":"string"},"id":{"type":"string"},"issuanceDate":{"format":"date-time","type":"string"},"issuer":{"type":["string","object"],"format":"uri","properties":{"id":{"format":"uri","type":"string"}},"required":["id"]},"type":{"type":["string","array"],"items":{"type":"string"}},"credentialSubject":{"description":"Stores the data of the credential","title":"Credential subject","properties":{"operatorId":{"description":"operator id ","title":"Operator id","type":"integer"},"country":{"description":"country name","title":"Country ","type":"string"},"price":{"description":"price to pay for the delivery","title":"Price","type":"number"},"deliveryTime":{"description":"time of the delivery","title":"Delivery time","format":"date-time","type":"string"},"isPostalProvider":{"description":"should be true if delivery is expected to the postal provider office","title":"if postal provider is used","type":"boolean"},"id":{"description":"Stores the DID of the subject that owns the credential","title":"Credential subject ID","format":"uri","type":"string"},"postalProviderInformation":{"description":"information if postal provider office is chosen","title":"postal office","properties":{"insured":{"description":"insurance","title":"insured","type":"boolean"},"weight":{"description":"weight","title":"weight","type":"number"},"name":{"description":"Name of the service provider","title":"Name","type":"string"},"officeNo":{"description":"number of the office","title":"Office Number","type":"integer"}},"required":["insured","weight","name","officeNo"],"type":"object"},"homeAddress":{"description":"physical address ","title":"home address","properties":{"expectedFrom":{"description":"expectedFrom","title":"expectedFrom","format":"date-time","type":"string"},"line2":{"description":"line 2","title":"line 2","type":"string"},"line1":{"description":"line 1","title":"Line 1","type":"string"}},"required":["expectedFrom","line2","line1"],"type":"object"}},"required":["operatorId","country","price","deliveryTime","isPostalProvider"],"type":"object"},"credentialSchema":{"properties":{"id":{"format":"uri","type":"string"},"type":{"type":"string"}},"required":["id","type"],"type":"object"}},"required":["@context","id","issuanceDate","issuer","type","credentialSubject","credentialSchema"],"type":"object"}'
  },

  {
    url: 'ipfs://QmTRpn65HN3j6Y5ZC5WDU1orXnWPWMpoPr2qpep8eMCX6e',
    // eslint-disable-next-line @cspell/spellchecker
    doc: '{"$metadata":{"uris":{"jsonLdContext":"ipfs://QmcvoKLc742CyVH2Cnw6X95b4c8VdABqNPvTyAHEeaK1aP"},"version":"1.0","type":"types123"},"$schema":"https://json-schema.org/draft/2020-12/schema","description":"desc","title":"typesTest","properties":{"credentialSubject":{"description":"Stores the data of the credential","title":"Credential subject","properties":{"id":{"description":"Stores the DID of the subject that owns the credential","title":"Credential subject ID","format":"uri","type":"string"},"string":{"description":"desc","title":"str","type":"string"},"int":{"description":"descint","title":"int","type":"integer"},"double":{"description":"desc double","title":"doubl","type":"number"},"bol":{"description":"desc bool","title":"bol","type":"boolean"},"dt":{"description":"dateTime","title":"dateTime","format":"date-time","type":"string"}},"required":[],"type":"object"},"@context":{"type":["string","array","object"]},"expirationDate":{"format":"date-time","type":"string"},"id":{"type":"string"},"issuanceDate":{"format":"date-time","type":"string"},"issuer":{"type":["string","object"],"format":"uri","properties":{"id":{"format":"uri","type":"string"}},"required":["id"]},"type":{"type":["string","array"],"items":{"type":"string"}},"credentialSchema":{"properties":{"id":{"format":"uri","type":"string"},"type":{"type":"string"}},"required":["id","type"],"type":"object"},"credentialStatus":{"description":"Allows the discovery of information about the current status of the credential, such as whether it is suspended or revoked.","title":"Credential Status","properties":{"id":{"description":"Id URL of the credentialStatus.","title":"Id","format":"uri","type":"string"},"type":{"description":"Expresses the credential status type (method). The value should provide enough information to determine the current status of the credential.","title":"Type","type":"string"}},"required":["id","type"],"type":"object"}},"required":["credentialSubject","@context","id","issuanceDate","issuer","type","credentialSchema"],"type":"object"}'
  },

  {
    url: 'https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json/kyc-nonmerklized.json',
    doc: '{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","$metadata":{"uris":{"jsonLdContext":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-nonmerklized.jsonld"}},"required":["@context","id","type","issuanceDate","credentialSubject","credentialSchema","credentialStatus","issuer"],"properties":{"@context":{"type":["string","array","object"]},"id":{"type":"string"},"type":{"type":["string","array"],"items":{"type":"string"}},"issuer":{"type":["string","object"],"format":"uri","required":["id"],"properties":{"id":{"type":"string","format":"uri"}}},"issuanceDate":{"type":"string","format":"date-time"},"expirationDate":{"type":"string","format":"date-time"},"credentialSchema":{"type":"object","required":["id","type"],"properties":{"id":{"type":"string","format":"uri"},"type":{"type":"string"}}},"credentialSubject":{"type":"object","required":["birthday","documentType"],"properties":{"id":{"title":"Credential Subject ID","type":"string","format":"uri"},"birthday":{"type":"integer"},"documentType":{"type":"integer"}}}}}'
  },

  {
    url: 'https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json/KYCEmployee-v101.json',
    doc: '{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","$metadata":{"uris":{"jsonLdContext":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v101.json-ld","jsonSchema":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json/KYCEmployee-v101.json"}},"required":["@context","id","type","issuanceDate","credentialSubject","credentialSchema","credentialStatus","issuer"],"properties":{"@context":{"type":["string","array","object"]},"id":{"type":"string"},"type":{"type":["string","array"],"items":{"type":"string"}},"issuer":{"type":["string","object"],"format":"uri","required":["id"],"properties":{"id":{"type":"string","format":"uri"}}},"issuanceDate":{"type":"string","format":"date-time"},"expirationDate":{"type":"string","format":"date-time"},"credentialSchema":{"type":"object","required":["id","type"],"properties":{"id":{"type":"string","format":"uri"},"type":{"type":"string"}}},"subjectPosition":{"type":"string","enum":["none","index","value"]},"merklizationRootPosition":{"type":"string","enum":["none","index","value"]},"revNonce":{"type":"integer"},"version":{"type":"integer"},"updatable":{"type":"boolean"},"credentialSubject":{"type":"object","required":["id","documentType"],"properties":{"id":{"title":"Credential Subject ID","type":"string","format":"uri"},"ZKPexperiance":{"type":"boolean"},"hireDate":{"type":"string"},"position":{"type":"string"},"salary":{"type":"number"},"documentType":{"type":"integer"}}}}}'
  },
  {
    url: 'https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json/KYCAgeCredential-v4.json',
    doc: '{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","$metadata":{"uris":{"jsonLdContext":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v4.jsonld","jsonSchema":"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json/KYCAgeCredential-v4.json"}},"required":["@context","id","type","issuanceDate","credentialSubject","credentialSchema","credentialStatus","issuer"],"properties":{"@context":{"type":["string","array","object"]},"id":{"type":"string"},"type":{"type":["string","array"],"items":{"type":"string"}},"issuer":{"type":["string","object"],"format":"uri","required":["id"],"properties":{"id":{"type":"string","format":"uri"}}},"issuanceDate":{"type":"string","format":"date-time"},"expirationDate":{"type":"string","format":"date-time"},"credentialSchema":{"type":"object","required":["id","type"],"properties":{"id":{"type":"string","format":"uri"},"type":{"type":"string"}}},"subjectPosition":{"type":"string","enum":["none","index","value"]},"merklizationRootPosition":{"type":"string","enum":["none","index","value"]},"revNonce":{"type":"integer"},"version":{"type":"integer"},"updatable":{"type":"boolean"},"credentialSubject":{"type":"object","required":["id","birthday","documentType"],"properties":{"id":{"title":"Credential Subject ID","type":"string","format":"uri"},"birthday":{"type":"integer"},"documentType":{"type":"integer"}}}}}'
  }
];

export const schemaLoaderForTests = (opts?: Options): DocumentLoader => {
  const cache = new Map<string, RemoteDocument>();

  testSchemas.forEach((schema) => {
    cache.set(schema.url, {
      document: JSON.parse(schema.doc),
      documentUrl: schema.url
    });
  });

  return async (url: Url): Promise<RemoteDocument> => {
    console.log(url);
    const remoteDoc = cache.get(url);
    if (remoteDoc) {
      return remoteDoc;
    }
    return cacheLoader(opts)(url);
  };
};
